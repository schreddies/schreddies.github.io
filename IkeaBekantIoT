Hi,
During pandemic I've bought myself a gift: Ikea Bekant. Purchase was made to enchance 'working from home' expirience barable. Aaaand here we are - 2,5 years working like that. Why Bekant? No idea, probably it was available at that time and my wif... I like white colour. 

The only downside was control panel: it was required to press one of two buttons, either 'up' or 'down' for whole time, during changing height. No fixed position for standing or sitting - that's shame. Or perfect opurtinity for DIY project.

First thought, after quick look at the desk frame, was to remove control panel, and instead, put microcontroller to communicate directly with motors. But as I was lacking oscilioscope and any tools (my parents basement have it all) I needed some simpler solution. Emulate the buttons! The pilot inside looks like this, so there were no problem with change buttons to GPIO ports, with 'safety pin' conncted directly to GND.

As my Raspberry Pi zero was overkill, not available and cold dead after other project, I've picked the old (7 years old to be precise) esp32 devkit. I've planned to do my master thesis using it, but... The conection is dead simple - three cables from 'pilot', esp32, microusb cable, no fancy LEDs, no custom, neither mechanical switches for operation. 

At the instigation from my firend Piotr, I've used the Tasmota software, to integrate it with my not-so-smart home setup. Docker based Home Assistant, deployed on Orange Pi Zero 2 (that's some serious power board), paired with MQTT Borker Mosquitto is the brain of the system. Automation - if the 'switch up' is on, set the pin high for N, where N is the empirically measured desk height for your height... in seconds, and then switch off the 'switch up'. Same with low position. And thanks to Home Automation it was possible to setup the Siri integration. 

With all of that engineering, time and around 30USD, so I can irritate my wife saying 'Hey Siri, Office down/up' everytime when changing postion instead of holding the button for 13 seconds. 

SAFETY
As the securiy engineer I was aware of all, potenitall, security issues - and I am still now. But far more concerning me is the safety - for now there is no safety system to limit the crashing power of desk, going down on something, or someone under the desk. And in case of Rise of the Machines I am doomed. 
